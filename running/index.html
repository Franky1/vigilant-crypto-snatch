
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.2">
    
    
      
        <title>Usage - Vigilant Crypto Snatch</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f955dcd.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Vigilant Crypto Snatch" class="md-header__button md-logo" aria-label="Vigilant Crypto Snatch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vigilant Crypto Snatch
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Vigilant Crypto Snatch" class="md-nav__button md-logo" aria-label="Vigilant Crypto Snatch" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Vigilant Crypto Snatch
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Usage
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#subcommand-watch" class="md-nav__link">
    Subcommand watch
  </a>
  
    <nav class="md-nav" aria-label="Subcommand watch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nonce-rejections-with-kraken" class="md-nav__link">
    Nonce rejections with Kraken
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subcommand-evaluate" class="md-nav__link">
    Subcommand evaluate
  </a>
  
    <nav class="md-nav" aria-label="Subcommand evaluate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-errors" class="md-nav__link">
    Possible errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#price-tool" class="md-nav__link">
    Price tool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-simulation-tool" class="md-nav__link">
    Trigger simulation tool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-survey-tool" class="md-nav__link">
    Drop survey tool
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../developing/" class="md-nav__link">
        Developing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../donation/" class="md-nav__link">
        Donation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#subcommand-watch" class="md-nav__link">
    Subcommand watch
  </a>
  
    <nav class="md-nav" aria-label="Subcommand watch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nonce-rejections-with-kraken" class="md-nav__link">
    Nonce rejections with Kraken
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subcommand-evaluate" class="md-nav__link">
    Subcommand evaluate
  </a>
  
    <nav class="md-nav" aria-label="Subcommand evaluate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#possible-errors" class="md-nav__link">
    Possible errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#price-tool" class="md-nav__link">
    Price tool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-simulation-tool" class="md-nav__link">
    Trigger simulation tool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-survey-tool" class="md-nav__link">
    Drop survey tool
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="usage">Usage</h1>
<p>The program has a hierarchical command line interface with multiple subcommands. If you have installed it system-wide, you can just directly call it. Otherwise you might have to add <code>~/.local/bin</code> to your <code>PATH</code> variable. With the <code>--help</code> option you will see an up-to-date list of options.</p>
<p>The general structure of a call is this:</p>
<div class="highlight"><pre><span></span><code>vigilant-crypto-snatch [general options] subcommand [subcommand options]
</code></pre></div>
<p>The general options are the following:</p>
<ul>
<li><code>--loglevel</code>: The program can emit a lot of status output while running. You can specify a <em>log level</em> with <code>--loglevel LEVEL</code>, where <code>LEVEL</code> can be <code>critical</code>, <code>error</code>, <code>warning</code>, <code>info</code> or <code>debug</code>. The <code>info</code> level is the default and does not fill the terminal with tons of output. You can set it to <code>debug</code> if you want to have more output and want to diagnose your triggers.</li>
</ul>
<h2 id="subcommand-watch">Subcommand watch</h2>
<p>The main command is <code>watch</code>.  It will monitor the market and place buy orders.</p>
<p>There are a couple of command line options:</p>
<ul>
<li><code>--marketplace MARKETPLACE</code>: We support two marketplaces, you can select either <code>bitstamp</code> or <code>kraken</code>.</li>
<li><code>--keepalive</code>: The program handles various error cases. Sometimes there are exceptions that we haven't encountered yet. When you use the watch subcommand in production, you can specify this option. It will catch <em>any</em> exception and just report it. Please <a href="https://github.com/martin-ueding/vigilant-crypto-snatch/issues">open a ticket</a> when you encounter a new exception type.</li>
</ul>
<p>When you want to quit, just press <kbd>Ctrl</kbd>+<kbd>C</kbd>.</p>
<p>All historical price data and performed transactions will be stored in a SQLite database at <code>~/.local/share/vigilant-crypto-snatch/db.sqlite</code>. We sometimes change the database format between major releases. In that case it is easiest to delete the database and let the script create the new one. As there are only so few users, we don't offer proper database migrations.</p>
<p>An example for running the script with log level info on Kraken:</p>
<div class="highlight"><pre><span></span><code>vigilant-crypto-snatch --loglevel info watch --marketplace kraken --keepalive
</code></pre></div>
<h3 id="nonce-rejections-with-kraken">Nonce rejections with Kraken</h3>
<p>If you happen to get nonce errors with the Kraken marketplace, consider using less triggers for it, or modifying your API key according to <a href="https://support.kraken.com/hc/en-us/articles/360001148063-Why-am-I-getting-Invalid-Nonce-Errors-">their guide</a></p>
<h2 id="subcommand-evaluate">Subcommand evaluate</h2>
<p>It is not inherently clear how triggers should be set. There are multiple variables that have to be tuned for <em>each</em> trigger:</p>
<ul>
<li>Time delay</li>
<li>Cooloff (currently the same as time delay)</li>
<li>Drop percentage</li>
<li>Fiat volume</li>
</ul>
<p>We can try to verify a given strategy using historical data. We can also use the historical data to get an idea of a good strategy. Then we just simulate the given triggers and see how they perform.</p>
<p>We provide a fun experimentation interface which is built with <a href="https://streamlit.io/">Streamlit</a> and runs directly in your browser.</p>
<p><img alt="" src="../streamlit.png" /></p>
<p>This interface can be started using the <code>evaluate</code> subcommand without any additional parameters:</p>
<div class="highlight"><pre><span></span><code>vigilant-crypto-snatch evaluate
</code></pre></div>
<p>You can then select a crypto and a fiat currency to use for the analysis. Then you can just switch between the various tools that are offered. These are described below.</p>
<h3 id="possible-errors">Possible errors</h3>
<p>It might be possible that you cannot start the Streamlit interface. The most basic error could be an <code>ImportError</code> saying that the package <code>altair</code> or <code>streamlit</code> could not be imported. In that case you haven't installed the evaluation extra. See the installation instructions on the front page.</p>
<p>While starting it, you might get an error about too many files connected via inotify. In this case you need to create a file at <code>.streamlit/config.toml</code> and give it this content:</p>
<div class="highlight"><pre><span></span><code><span class="k">[server]</span>
<span class="n">fileWatcherType</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span>
</code></pre></div>
<h3 id="price-tool">Price tool</h3>
<p>Here you can just see the prices that we got from the historical API. This is nothing special, just a plot.</p>
<p><img alt="" src="../price-plot.png" /></p>
<p>These plots are slightly interactive, so you can make them fullscreen and they will render with higher quality.</p>
<h3 id="trigger-simulation-tool">Trigger simulation tool</h3>
<p>You simulate triggers on historical data. Just select the type of trigger and tune the parameters to your liking.</p>
<p><img alt="" src="../trigger-parameters.png" /></p>
<p>It will give you a summary which looks like this:</p>
<blockquote>
<ul>
<li>83 days simulated</li>
<li>18 trades</li>
<li>450.00 EUR invested</li>
<li>0.01189674 BTC acquired</li>
<li>552.74 EUR value</li>
<li>22.8 % gain in 83 days</li>
<li>147.0 % estimated yearly gain</li>
</ul>
</blockquote>
<p>You will also get a plot which shows the amount of money you have invested as well as the value of the crypto assets aquired. With this you can get a sense on the gains.</p>
<p><img alt="" src="../trigger-plot.png" /></p>
<p>You also have a table with the trades that were performed.</p>
<p><img alt="" src="../trigger-table.png" /></p>
<p>In case the trigger has not been executed once, you will of course get a message.</p>
<h3 id="drop-survey-tool">Drop survey tool</h3>
<p>Fiddling with individual triggers can be informative, but a more meta view could be very helpful. For this all sorts of drop triggers are performed, with a grid of various delays and various drop percentages.</p>
<p>You can control the ranges of both with two-way sliders.</p>
<p><img alt="" src="../drop-sliders.png" /></p>
<p>Each time such a trigger is executed a fixed unit of fiat currency is invested. At the end of the time period the amount of crypto currency is normalized by the amount of fiat currency spent. This will show the most efficient triggers. It doesn't show how often these triggers have been used, or how much crypto currency you will have in the end.</p>
<p><img alt="" src="../drop-heatmap.png" /></p>
<p>In the resulting heat map you can see colored areas where the most gains are in a dark red. In regions where the trigger has never been executed, you will just see black. These regions indicate that there was no such drop in the period looked at.</p>
<p>Likely there will be one really dark area. This is an artefact from a single large drop in the past three months. Of course this is the best drop trigger for that particluar period, but it does not really generalize. So be wary that different historical periods look differently.</p>
<p>Use this plot to get a general sense of fluctuations in the market and which triggers would fire often and form a good base strategy. In the above image, having a trigger at around 10 % and 24 hours delay seems to be a reasonable choice.</p>
<p>You might still want to include some really ambitious triggers such that you can realize large gains. For instance having one for 25 % within 48 hours could be a good idea.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../configuration/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Configuration
            </div>
          </div>
        </a>
      
      
        <a href="../developing/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Developing
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>